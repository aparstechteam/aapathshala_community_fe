import React from "react";
import { ChevronLeft, ChevronRight } from "lucide-react";
import Link from "next/link";
import { Button, swap, TooltipProvider } from "@/components";
import { Tooltip, TooltipContent, TooltipTrigger } from "@/components";
import { Skeleton } from "@/components";
import Router from "next/router";
import { cn } from "@/lib/utils";
import { months } from "@/data/months";
import { LeaderboardEntry, Pagination } from "@/@types";
import { ValidImage } from "@/components/shared/ValidImage";

type Props = {
  limit?: number | null;
  nextMonth: () => void;
  prevMonth: () => void;
  currentMonthIndex: number | string;
  currentMonth: string;
  data: {
    leaderboard: LeaderboardEntry[] | [];
    pagination: Pagination;
    first_3: LeaderboardEntry[] | [];
  };
  page: number;
  setPage: (p: number) => void;
  loading?: boolean;
};

export const TopSolvers: React.FC<Props> = (props) => {
  const {
    nextMonth,
    prevMonth,
    currentMonthIndex,
    currentMonth,
    data,
    loading,
  } = props;

  return (
    <>
      <div className="dark:!text-gray-100">
        <div className="flex items-center text-gray-800 dark:text-rose-400 justify-between p-1 mb-3 dark:bg-gray-800 bg-gray-100 rounded-full">
          <Button
            size="sm"
            variant="ghost"
            disabled={currentMonthIndex === 0}
            onClick={prevMonth}
          >
            <ChevronLeft className="w-4 h-4" />
          </Button>
          <span className="text-sm pt-1 font-medium">{currentMonth}</span>
          <Button
            size="sm"
            variant="ghost"
            disabled={currentMonthIndex === months.length - 1}
            onClick={nextMonth}
          >
            <ChevronRight className="w-4 h-4" />
          </Button>
        </div>
        {data.first_3.length > 0 && (
          <div className="grid grid-cols-3 h-[160px] py-5">
            {swap(data.first_3, 1, 0, 2)?.map((l, index) => {
              return data.first_3.length === 1 ? (
                <React.Fragment key={l?.id}>
                  <div></div>
                  <div
                    key={l?.id}
                    className={cn(
                      "grid relative",
                      index === 1 && "items-start",
                      index !== 1 && "items-end"
                    )}
                  >
                    <div className="grid justify-items-center">
                      <div className="relative">
                        <span
                          className={cn(
                            "flex absolute -top-3 w-full justify-center"
                          )}
                        >
                          <svg
                            className="w-5 h-5"
                            viewBox="0 0 13 13"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <g clipPath="url(#clip0_4_2711)">
                              <path
                                d="M11.5819 3.04845C11.4114 2.97745 11.2237 2.95878 11.0426 2.99483C10.8615 3.03089 10.6952 3.12003 10.565 3.2509L9.35866 4.4572L7.21942 2.31795C7.04446 2.14305 6.80721 2.0448 6.55983 2.0448C6.31244 2.0448 6.07519 2.14305 5.90023 2.31795L3.76099 4.4572L2.55469 3.2509C2.42422 3.12046 2.258 3.03164 2.07706 2.99566C1.89611 2.95968 1.70856 2.97815 1.53811 3.04875C1.36766 3.11935 1.22197 3.23889 1.11945 3.39228C1.01694 3.54566 0.962198 3.726 0.962158 3.91049V8.84857C0.962899 9.46692 1.20887 10.0597 1.64611 10.497C2.08335 10.9342 2.67617 11.1802 3.29452 11.1809H9.82513C10.4435 11.1802 11.0363 10.9342 11.4735 10.497C11.9108 10.0597 12.1568 9.46692 12.1575 8.84857V3.91049C12.1575 3.72599 12.1029 3.54561 12.0004 3.39217C11.898 3.23873 11.7523 3.11911 11.5819 3.04845Z"
                                fill="#FAA82A"
                              />
                            </g>
                            <defs>
                              <clipPath id="clip0_4_2711">
                                <rect
                                  width="11.1953"
                                  height="11.1953"
                                  fill="white"
                                  transform="translate(0.961914 0.918945)"
                                />
                              </clipPath>
                            </defs>
                          </svg>
                        </span>
                        <ValidImage
                          className="rounded-full w-[50px] h-[50px]"
                          src={l?.image}
                          alt={l?.name}
                          width={50}
                          height={50}
                        />
                        <span className="absolute -bottom-1 -right-1">
                          <svg
                            className="w-5 h-5"
                            viewBox="0 0 16 15"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <g clipPath="url(#clip0_4_2619)">
                              <path
                                d="M5.37919 10.1238L4.80209 10.1519L3.68319 13.3666C3.64754 13.4689 3.7305 13.5737 3.83834 13.5623L5.40671 13.3981C5.45053 13.3935 5.49408 13.4087 5.52558 13.4395L6.65304 14.542C6.73054 14.6178 6.86059 14.5873 6.89621 14.4849L8.02241 11.2492L7.69033 10.9269L5.37919 10.1238Z"
                                fill="#FF4755"
                              />
                              <path
                                d="M8.02196 11.249L8.24953 10.5952L5.02852 9.49988L4.80164 10.1517C5.71628 10.8044 6.82374 11.2039 8.02196 11.249Z"
                                fill="#FC2B3A"
                              />
                              <path
                                d="M11.1205 10.1238L11.6976 10.1519L12.8165 13.3666C12.8521 13.4689 12.7692 13.5737 12.6613 13.5623L11.093 13.3981C11.0492 13.3935 11.0056 13.4087 10.9741 13.4395L9.84667 14.542C9.76917 14.6178 9.63912 14.5873 9.6035 14.4849L8.47729 11.2492L8.80938 10.9269L11.1205 10.1238Z"
                                fill="#FF4755"
                              />
                              <path
                                d="M8.47671 11.249L8.24915 10.5952L11.4702 9.49988L11.697 10.1517C10.7824 10.8044 9.67493 11.2039 8.47671 11.249Z"
                                fill="#FC2B3A"
                              />
                              <path
                                d="M8.24914 10.2655C2.96509 10.2655 2.9673 5.13279 2.97168 5.04457C3.1104 2.25003 5.42015 0.0268555 8.24914 0.0268555C11.0781 0.0268555 13.3879 2.25003 13.5266 5.04459C13.531 5.13282 13.5332 10.2655 8.24914 10.2655Z"
                                fill="#FFE27A"
                              />
                              <path
                                d="M8.24963 10.062C5.42064 10.062 3.11098 7.83888 2.97223 5.04431C2.96785 5.13253 2.96558 5.22133 2.96558 5.31063C2.96558 8.22893 5.33134 10.5947 8.24963 10.5947C11.1679 10.5947 13.5337 8.22893 13.5337 5.31063C13.5337 5.2213 13.5314 5.13253 13.527 5.04431C13.3883 7.83888 11.0786 10.062 8.24963 10.062Z"
                                fill="#F9CF58"
                              />
                              <path
                                d="M8.2493 9.12839C4.09497 9.12839 4.0894 5.04329 4.09497 4.95521C4.23232 2.78031 6.03977 1.05884 8.2493 1.05884C10.4588 1.05884 12.2663 2.78031 12.4036 4.95521C12.4092 5.04326 12.4036 9.12839 8.2493 9.12839Z"
                                fill="#FFBA57"
                              />
                              <path
                                d="M8.24939 8.94071C6.03989 8.94071 4.23275 7.21918 4.0954 5.04431C4.08983 5.13239 4.08667 5.22116 4.08667 5.31063C4.08667 7.60963 5.95039 9.47335 8.24939 9.47335C10.5484 9.47335 12.4121 7.60963 12.4121 5.31063C12.4121 5.22113 12.409 5.13239 12.4034 5.04431C12.266 7.21918 10.4589 8.94071 8.24939 8.94071Z"
                                fill="#FFAC3E"
                              />
                              <path
                                d="M8.48706 7.78331C8.19806 7.78331 7.96375 7.54903 7.96375 7.25999V6.98321V4.32725C7.96375 4.32725 7.65063 4.64128 7.27599 4.45286C6.98389 4.30596 6.98389 3.92785 6.98389 3.92785L7.62908 2.83875C7.72331 2.6797 7.89446 2.58215 8.07933 2.58215H8.48706C8.77607 2.58215 9.01037 2.81643 9.01037 3.10546V6.98321V7.25999C9.01037 7.54903 8.77607 7.78331 8.48706 7.78331Z"
                                fill="#FFE27A"
                              />
                              <path
                                d="M7.89195 3.91649C7.75306 4.15097 7.45774 4.25264 7.21144 4.13593C7.11176 4.0887 7.03491 4.01532 6.98382 3.92866C6.8385 4.17448 6.91717 4.49073 7.15913 4.64013C7.40864 4.79423 7.74206 4.70223 7.89149 4.4499L7.96388 4.32767V3.93614C7.96388 3.89685 7.91199 3.88266 7.89195 3.91649Z"
                                fill="#F9CF58"
                              />
                              <path
                                d="M8.48742 7.50756C8.19842 7.50756 7.96411 7.27329 7.96411 6.98425V7.51692C7.96411 7.80595 8.19842 8.04023 8.48742 8.04023C8.77643 8.04023 9.01073 7.80595 9.01073 7.51692V6.98425C9.01073 7.27329 8.77643 7.50756 8.48742 7.50756Z"
                                fill="#F9CF58"
                              />
                            </g>
                            <defs>
                              <clipPath id="clip0_4_2619">
                                <rect
                                  width="14.5569"
                                  height="14.5569"
                                  fill="white"
                                  transform="translate(0.970703 0.0273438)"
                                />
                              </clipPath>
                            </defs>
                          </svg>
                        </span>
                      </div>
                      <h4 className="text-sm capitalize pt-1 font-semibold">
                        {l?.name.split(" ")[0]}
                      </h4>
                      <h4 className="flex items-center gap-1 text-sm">
                        <svg
                          className="h-3 w-3"
                          viewBox="0 0 9 9"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M7.11196 0.623024L7.56821 1.35321L8.40355 1.56134C8.5421 1.59598 8.59657 1.76349 8.50494 1.87306L7.9514 2.5324L8.01154 3.39106C8.02162 3.53338 7.87898 3.63729 7.74642 3.58376L6.94823 3.26102L6.15004 3.58376C6.0178 3.63729 5.87485 3.53369 5.88492 3.39106L5.94506 2.5324L5.39152 1.87306C5.29958 1.7638 5.35437 1.59598 5.49291 1.56134L6.32826 1.35321L6.7845 0.623024C6.85975 0.501798 7.0364 0.501798 7.11196 0.623024Z"
                            fill="#575757"
                          />
                          <path
                            d="M6.37096 5.01729L4.87633 2.85415C4.86638 2.83964 4.85305 2.82778 4.83749 2.81959C4.82192 2.81139 4.8046 2.80711 4.78701 2.80711C4.76943 2.80711 4.7521 2.81139 4.73654 2.81959C4.72098 2.82778 4.70765 2.83964 4.6977 2.85415L3.20307 5.01729C3.18875 5.03816 3.1676 5.05337 3.14326 5.06031C3.11892 5.06724 3.09293 5.06546 3.06976 5.05528L0.948945 4.11317C0.930009 4.10486 0.909098 4.1021 0.888653 4.10522C0.868208 4.10835 0.849074 4.11723 0.833487 4.13082C0.8179 4.14442 0.806504 4.16217 0.80063 4.182C0.794756 4.20183 0.794646 4.22292 0.800314 4.24281L2.03002 8.45379C2.03658 8.47638 2.0503 8.49622 2.06911 8.51034C2.08792 8.52446 2.1108 8.5321 2.13432 8.5321H7.44004C7.46356 8.5321 7.48644 8.52446 7.50525 8.51034C7.52406 8.49622 7.53778 8.47638 7.54435 8.45379L8.77405 4.24281C8.77972 4.22292 8.77961 4.20183 8.77373 4.182C8.76786 4.16217 8.75646 4.14442 8.74088 4.13082C8.72529 4.11723 8.70616 4.10835 8.68571 4.10522C8.66527 4.1021 8.64435 4.10486 8.62542 4.11317L6.5046 5.05528C6.48136 5.06536 6.45536 5.06708 6.431 5.06015C6.40664 5.05323 6.38542 5.03808 6.37096 5.01729Z"
                            fill="#575757"
                          />
                        </svg>
                        <span className="pt-1">{l?.total_points}</span>
                      </h4>
                    </div>
                    <Link
                      href={`/users/${l?.id}`}
                      className="absolute inset-0"
                    ></Link>
                  </div>
                  <div></div>
                </React.Fragment>
              ) : (
                <div
                  key={l?.id}
                  className={cn(
                    "grid relative",
                    index === 1 && "items-start",
                    index !== 1 && "items-end"
                  )}
                >
                  <div className="grid justify-items-center">
                    <div className="relative">
                      <span
                        className={cn(
                          index !== 1 && "hidden",
                          index === 1 && "flex",
                          "absolute -top-3 w-full justify-center"
                        )}
                      >
                        <svg
                          className="w-5 h-5"
                          viewBox="0 0 13 13"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <g clipPath="url(#clip0_4_2711)">
                            <path
                              d="M11.5819 3.04845C11.4114 2.97745 11.2237 2.95878 11.0426 2.99483C10.8615 3.03089 10.6952 3.12003 10.565 3.2509L9.35866 4.4572L7.21942 2.31795C7.04446 2.14305 6.80721 2.0448 6.55983 2.0448C6.31244 2.0448 6.07519 2.14305 5.90023 2.31795L3.76099 4.4572L2.55469 3.2509C2.42422 3.12046 2.258 3.03164 2.07706 2.99566C1.89611 2.95968 1.70856 2.97815 1.53811 3.04875C1.36766 3.11935 1.22197 3.23889 1.11945 3.39228C1.01694 3.54566 0.962198 3.726 0.962158 3.91049V8.84857C0.962899 9.46692 1.20887 10.0597 1.64611 10.497C2.08335 10.9342 2.67617 11.1802 3.29452 11.1809H9.82513C10.4435 11.1802 11.0363 10.9342 11.4735 10.497C11.9108 10.0597 12.1568 9.46692 12.1575 8.84857V3.91049C12.1575 3.72599 12.1029 3.54561 12.0004 3.39217C11.898 3.23873 11.7523 3.11911 11.5819 3.04845Z"
                              fill="#FAA82A"
                            />
                          </g>
                          <defs>
                            <clipPath id="clip0_4_2711">
                              <rect
                                width="11.1953"
                                height="11.1953"
                                fill="white"
                                transform="translate(0.961914 0.918945)"
                              />
                            </clipPath>
                          </defs>
                        </svg>
                      </span>
                      <ValidImage
                        className="rounded-full h-[50px] w-[50px]"
                        src={l?.image}
                        alt={l?.name}
                        width={50}
                        height={50}
                      />
                      <span className="absolute -bottom-1 -right-1">
                        {index === 1 && (
                          <svg
                            className="w-5 h-5"
                            viewBox="0 0 16 15"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <g clipPath="url(#clip0_4_2619)">
                              <path
                                d="M5.37919 10.1238L4.80209 10.1519L3.68319 13.3666C3.64754 13.4689 3.7305 13.5737 3.83834 13.5623L5.40671 13.3981C5.45053 13.3935 5.49408 13.4087 5.52558 13.4395L6.65304 14.542C6.73054 14.6178 6.86059 14.5873 6.89621 14.4849L8.02241 11.2492L7.69033 10.9269L5.37919 10.1238Z"
                                fill="#FF4755"
                              />
                              <path
                                d="M8.02196 11.249L8.24953 10.5952L5.02852 9.49988L4.80164 10.1517C5.71628 10.8044 6.82374 11.2039 8.02196 11.249Z"
                                fill="#FC2B3A"
                              />
                              <path
                                d="M11.1205 10.1238L11.6976 10.1519L12.8165 13.3666C12.8521 13.4689 12.7692 13.5737 12.6613 13.5623L11.093 13.3981C11.0492 13.3935 11.0056 13.4087 10.9741 13.4395L9.84667 14.542C9.76917 14.6178 9.63912 14.5873 9.6035 14.4849L8.47729 11.2492L8.80938 10.9269L11.1205 10.1238Z"
                                fill="#FF4755"
                              />
                              <path
                                d="M8.47671 11.249L8.24915 10.5952L11.4702 9.49988L11.697 10.1517C10.7824 10.8044 9.67493 11.2039 8.47671 11.249Z"
                                fill="#FC2B3A"
                              />
                              <path
                                d="M8.24914 10.2655C2.96509 10.2655 2.9673 5.13279 2.97168 5.04457C3.1104 2.25003 5.42015 0.0268555 8.24914 0.0268555C11.0781 0.0268555 13.3879 2.25003 13.5266 5.04459C13.531 5.13282 13.5332 10.2655 8.24914 10.2655Z"
                                fill="#FFE27A"
                              />
                              <path
                                d="M8.24963 10.062C5.42064 10.062 3.11098 7.83888 2.97223 5.04431C2.96785 5.13253 2.96558 5.22133 2.96558 5.31063C2.96558 8.22893 5.33134 10.5947 8.24963 10.5947C11.1679 10.5947 13.5337 8.22893 13.5337 5.31063C13.5337 5.2213 13.5314 5.13253 13.527 5.04431C13.3883 7.83888 11.0786 10.062 8.24963 10.062Z"
                                fill="#F9CF58"
                              />
                              <path
                                d="M8.2493 9.12839C4.09497 9.12839 4.0894 5.04329 4.09497 4.95521C4.23232 2.78031 6.03977 1.05884 8.2493 1.05884C10.4588 1.05884 12.2663 2.78031 12.4036 4.95521C12.4092 5.04326 12.4036 9.12839 8.2493 9.12839Z"
                                fill="#FFBA57"
                              />
                              <path
                                d="M8.24939 8.94071C6.03989 8.94071 4.23275 7.21918 4.0954 5.04431C4.08983 5.13239 4.08667 5.22116 4.08667 5.31063C4.08667 7.60963 5.95039 9.47335 8.24939 9.47335C10.5484 9.47335 12.4121 7.60963 12.4121 5.31063C12.4121 5.22113 12.409 5.13239 12.4034 5.04431C12.266 7.21918 10.4589 8.94071 8.24939 8.94071Z"
                                fill="#FFAC3E"
                              />
                              <path
                                d="M8.48706 7.78331C8.19806 7.78331 7.96375 7.54903 7.96375 7.25999V6.98321V4.32725C7.96375 4.32725 7.65063 4.64128 7.27599 4.45286C6.98389 4.30596 6.98389 3.92785 6.98389 3.92785L7.62908 2.83875C7.72331 2.6797 7.89446 2.58215 8.07933 2.58215H8.48706C8.77607 2.58215 9.01037 2.81643 9.01037 3.10546V6.98321V7.25999C9.01037 7.54903 8.77607 7.78331 8.48706 7.78331Z"
                                fill="#FFE27A"
                              />
                              <path
                                d="M7.89195 3.91649C7.75306 4.15097 7.45774 4.25264 7.21144 4.13593C7.11176 4.0887 7.03491 4.01532 6.98382 3.92866C6.8385 4.17448 6.91717 4.49073 7.15913 4.64013C7.40864 4.79423 7.74206 4.70223 7.89149 4.4499L7.96388 4.32767V3.93614C7.96388 3.89685 7.91199 3.88266 7.89195 3.91649Z"
                                fill="#F9CF58"
                              />
                              <path
                                d="M8.48742 7.50756C8.19842 7.50756 7.96411 7.27329 7.96411 6.98425V7.51692C7.96411 7.80595 8.19842 8.04023 8.48742 8.04023C8.77643 8.04023 9.01073 7.80595 9.01073 7.51692V6.98425C9.01073 7.27329 8.77643 7.50756 8.48742 7.50756Z"
                                fill="#F9CF58"
                              />
                            </g>
                            <defs>
                              <clipPath id="clip0_4_2619">
                                <rect
                                  width="14.5569"
                                  height="14.5569"
                                  fill="white"
                                  transform="translate(0.970703 0.0273438)"
                                />
                              </clipPath>
                            </defs>
                          </svg>
                        )}
                        {index === 0 && (
                          <svg
                            className="w-5 h-5"
                            viewBox="0 0 12 15"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              d="M5.47262 11.1428L3.12617 10.3313L2.60846 10.384L1.48959 13.5987C1.45394 13.7011 1.5369 13.8058 1.64474 13.7945L3.21311 13.6302C3.25692 13.6257 3.30048 13.6408 3.33198 13.6716L4.45943 14.7742C4.53694 14.85 4.66698 14.8194 4.70261 14.717L5.82881 11.4814L5.47262 11.1428Z"
                              fill="#98DB7C"
                            />
                            <path
                              d="M5.82848 11.4808L6.05605 10.827L2.83504 9.73169L2.60815 10.3835C3.5228 11.0362 4.63026 11.4357 5.82848 11.4808Z"
                              fill="#82D361"
                            />
                            <path
                              d="M6.64105 11.1428L8.9875 10.3313L9.50521 10.384L10.6241 13.5987C10.6597 13.7011 10.5768 13.8058 10.469 13.7945L8.90058 13.6302C8.85677 13.6257 8.81321 13.6408 8.78174 13.6716L7.65429 14.7742C7.57678 14.85 7.44674 14.8194 7.41111 14.717L6.28491 11.4814L6.64105 11.1428Z"
                              fill="#98DB7C"
                            />
                            <path
                              d="M6.28506 11.4809L6.0575 10.8272L9.2785 9.73181L9.50539 10.3837C8.59074 11.0363 7.48328 11.4358 6.28506 11.4809Z"
                              fill="#82D361"
                            />
                            <path
                              d="M6.05772 10.4784C0.780261 10.4784 0.775883 5.365 0.780261 5.27677C0.918979 2.48221 3.22873 0.259033 6.05772 0.259033C8.88484 0.259033 11.1934 2.47925 11.3349 5.27117C11.3395 5.36124 11.3349 10.4784 6.05772 10.4784Z"
                              fill="#E0E0E0"
                            />
                            <path
                              d="M6.05725 10.2943C3.22826 10.2943 0.918592 8.07117 0.779846 5.27661C0.775468 5.36483 0.773193 5.45363 0.773193 5.54293C0.773193 8.46123 3.13895 10.827 6.05725 10.827C8.97555 10.827 11.3413 8.46123 11.3413 5.54293C11.3413 5.4536 11.339 5.36483 11.3347 5.27661C11.1959 8.07117 8.88625 10.2943 6.05725 10.2943Z"
                              fill="#CECECE"
                            />
                            <path
                              d="M6.05585 9.37479C1.89313 9.37479 1.89595 5.36458 1.90152 5.2765C2.03887 3.1016 3.84632 1.38013 6.05585 1.38013C8.26538 1.38013 10.0728 3.1016 10.2102 5.2765C10.2158 5.36458 10.2102 9.37479 6.05585 9.37479Z"
                              fill="#9E9E9E"
                            />
                            <path
                              d="M6.05798 9.17298C3.84848 9.17298 2.04134 7.45145 1.90399 5.27661C1.89842 5.36469 1.89526 5.45346 1.89526 5.54293C1.89526 7.84193 3.75898 9.70565 6.05798 9.70565C8.35698 9.70565 10.2207 7.84193 10.2207 5.54293C10.2207 5.45343 10.2175 5.36469 10.212 5.27661C10.0746 7.45145 8.26748 9.17298 6.05798 9.17298Z"
                              fill="#898989"
                            />
                            <path
                              d="M7.2556 8.01585H4.86957C4.58056 8.01585 4.3574 7.51275 4.37915 7.39778C4.43951 7.07849 4.58158 6.77763 4.79371 6.52689L6.47256 4.54271C6.62965 4.35705 6.55956 4.15701 6.53432 4.10009C6.50364 4.03091 6.40825 3.86917 6.18603 3.86166C6.17961 3.86143 6.17292 3.86132 6.16624 3.86132C5.85409 3.86132 5.60017 4.11527 5.60017 4.42742C5.60017 4.71643 5.36587 4.95073 5.07686 4.95073C4.78785 4.95073 4.55355 4.71645 4.55355 4.42742C4.55355 3.53819 5.27699 2.8147 6.16624 2.8147C6.18464 2.8147 6.20295 2.81501 6.22117 2.81564C6.77758 2.8344 7.2641 3.16404 7.49107 3.67583C7.72142 4.19528 7.63729 4.78648 7.27152 5.21875L5.59269 7.20293C5.58652 7.21024 5.58047 7.21763 5.57455 7.22514H7.25562C7.44725 7.22514 7.61483 7.32815 7.70601 7.48182C7.7523 7.55989 7.5446 8.01585 7.2556 8.01585Z"
                              fill="#E0E0E0"
                            />
                            <path
                              d="M7.25382 7.73796H4.86779C4.6429 7.73796 4.4517 7.59583 4.37769 7.39673C4.35594 7.51173 4.34448 7.62904 4.34448 7.74732C4.34448 8.03635 4.57879 8.27063 4.86779 8.27063H7.25382C7.54283 8.27063 7.77714 8.03635 7.77714 7.74732C7.77714 7.64994 7.75004 7.55907 7.70373 7.481C7.61255 7.63464 7.44545 7.73796 7.25382 7.73796Z"
                              fill="#CECECE"
                            />
                          </svg>
                        )}
                        {index === 2 && (
                          <svg
                            className="w-5 h-5"
                            viewBox="0 0 14 14"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <g clipPath="url(#clip0_4_2682)">
                              <path
                                d="M6.39436 10.1274L4.41072 9.46615L3.82922 9.46289L2.81207 12.3853C2.77966 12.4783 2.85508 12.5735 2.95311 12.5632L4.3789 12.414C4.41873 12.4098 4.45833 12.4236 4.48697 12.4516L5.51193 13.4539C5.58239 13.5228 5.70061 13.495 5.733 13.4019L6.75681 10.4604L6.39436 10.1274Z"
                                fill="#0083FD"
                              />
                              <path
                                d="M6.75679 10.4612L6.96367 9.86687L4.03548 8.87109L3.82922 9.46368C4.66072 10.057 5.6675 10.4202 6.75679 10.4612Z"
                                fill="#0072FC"
                              />
                              <path
                                d="M7.53342 10.1274L9.51706 9.46615L10.0986 9.46289L11.1157 12.3853C11.1482 12.4784 11.0727 12.5736 10.9747 12.5633L9.5489 12.414C9.50907 12.4098 9.46948 12.4236 9.44087 12.4516L8.41591 13.4539C8.34545 13.5228 8.22723 13.495 8.19484 13.402L7.17102 10.4604L7.53342 10.1274Z"
                                fill="#0083FD"
                              />
                              <path
                                d="M7.17087 10.4612L6.96399 9.86687L9.89218 8.87109L10.0984 9.46368C9.26694 10.057 8.26016 10.4202 7.17087 10.4612Z"
                                fill="#0072FC"
                              />
                              <path
                                d="M6.9638 9.46298C2.1661 9.46298 2.16212 4.90057 2.1661 4.82037C2.29221 2.27986 4.39198 0.258789 6.9638 0.258789C9.53561 0.258789 11.6354 2.27986 11.7615 4.82037C11.7655 4.90057 11.7615 9.46298 6.9638 9.46298Z"
                                fill="#FF9838"
                              />
                              <path
                                d="M6.96372 9.38236C4.39191 9.38236 2.29222 7.36129 2.16608 4.8208C2.1621 4.901 2.16003 4.98172 2.16003 5.06291C2.16003 7.71591 4.31072 9.8666 6.96372 9.8666C9.61672 9.8666 11.7674 7.71591 11.7674 5.06291C11.7674 4.98172 11.7653 4.901 11.7614 4.8208C11.6352 7.36129 9.53554 9.38236 6.96372 9.38236Z"
                                fill="#FF8709"
                              />
                              <path
                                d="M10.7484 5.06285C10.7484 6.6833 9.0541 8.61452 6.9641 8.61452C4.8741 8.61452 3.17981 6.57704 3.17981 5.06285C3.17981 4.98151 3.18237 4.90079 3.18743 4.82072C3.31227 2.84354 4.95544 1.27856 6.9641 1.27856C8.97276 1.27856 10.6159 2.84354 10.7408 4.82072C10.7458 4.90079 10.7484 4.98151 10.7484 5.06285Z"
                                fill="#CE7430"
                              />
                              <path
                                d="M6.9641 8.36296C4.95546 8.36296 3.31261 6.79793 3.18774 4.8208C3.18268 4.90087 3.17981 4.98154 3.17981 5.06291C3.17981 7.15291 4.8741 8.8472 6.9641 8.8472C9.0541 8.8472 10.7484 7.15291 10.7484 5.06291C10.7484 4.98154 10.7455 4.90087 10.7405 4.8208C10.6156 6.79793 8.97273 8.36296 6.9641 8.36296Z"
                                fill="#BC672E"
                              />
                              <path
                                d="M6.96831 7.31066C6.15328 7.31066 5.63469 6.74883 5.53487 6.08224C5.5258 6.0216 5.52293 5.89147 5.52293 5.89147C5.59233 5.71465 5.76452 5.58945 5.96595 5.58945C6.22868 5.58945 6.44168 5.80242 6.44168 6.06518C6.44168 6.35557 6.67792 6.59181 6.96831 6.59181C7.2587 6.59181 7.49497 6.35557 7.49497 6.06518C7.49497 5.97787 7.47362 5.89547 7.43586 5.82289C7.43586 5.82289 7.40014 5.3743 6.9938 5.3743C6.58619 5.3743 6.5589 4.82045 6.5589 4.82045C6.64179 4.68075 6.79413 4.5871 6.96834 4.5871C7.25873 4.5871 7.49499 4.35086 7.49499 4.06048C7.49499 3.77009 7.25873 3.53385 6.96834 3.53385C6.67795 3.53385 6.44171 3.77009 6.44171 4.06048C6.44171 4.32323 6.2287 4.53621 5.96597 4.53621C5.70324 4.53621 5.49023 4.32323 5.49023 4.06048C5.49023 3.24547 6.15331 2.5824 6.96831 2.5824C7.78334 2.5824 8.44642 3.24547 8.44642 4.06048C8.44642 4.44694 8.29738 4.79918 8.0537 5.06284C8.24543 5.27029 8.37857 5.53258 8.42664 5.82323C8.42664 5.82323 8.42812 5.98276 8.41429 6.06399C8.29635 6.75726 7.78334 7.31066 6.96831 7.31066Z"
                                fill="#FFAA5C"
                              />
                              <path
                                d="M6.96826 5.05465C6.79406 5.05465 6.64216 4.96072 6.55929 4.82104C6.51716 4.89202 6.49255 4.97463 6.49255 5.06315C6.49255 5.32591 6.70553 5.53889 6.96829 5.53889C7.17137 5.53889 7.34764 5.65463 7.43547 5.82344C7.47323 5.75086 7.49495 5.66864 7.49495 5.58133C7.49492 5.29089 7.25865 5.05465 6.96826 5.05465Z"
                                fill="#EA9957"
                              />
                              <path
                                d="M6.96846 7.05901C6.26002 7.05901 5.66663 6.55791 5.52349 5.89161C5.50238 5.94542 5.49036 6.00383 5.49036 6.06517C5.49036 6.8802 6.15343 7.54327 6.96846 7.54327C7.78349 7.54327 8.44656 6.8802 8.44656 6.06517C8.44656 5.98274 8.4394 5.90202 8.42638 5.82324C8.31038 6.52333 7.70096 7.05901 6.96846 7.05901Z"
                                fill="#EA9957"
                              />
                            </g>
                            <defs>
                              <clipPath id="clip0_4_2682">
                                <rect
                                  width="13.2336"
                                  height="13.2336"
                                  fill="white"
                                  transform="translate(0.346558 0.260254)"
                                />
                              </clipPath>
                            </defs>
                          </svg>
                        )}
                      </span>
                    </div>
                    <h4 className="text-sm capitalize font-semibold">
                      {l?.name.split(" ")[0]}
                    </h4>
                    <h4 className="flex items-center gap-1 text-sm">
                      <svg
                        className="h-3 w-3"
                        viewBox="0 0 9 9"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M7.11196 0.623024L7.56821 1.35321L8.40355 1.56134C8.5421 1.59598 8.59657 1.76349 8.50494 1.87306L7.9514 2.5324L8.01154 3.39106C8.02162 3.53338 7.87898 3.63729 7.74642 3.58376L6.94823 3.26102L6.15004 3.58376C6.0178 3.63729 5.87485 3.53369 5.88492 3.39106L5.94506 2.5324L5.39152 1.87306C5.29958 1.7638 5.35437 1.59598 5.49291 1.56134L6.32826 1.35321L6.7845 0.623024C6.85975 0.501798 7.0364 0.501798 7.11196 0.623024Z"
                          fill="#575757"
                        />
                        <path
                          d="M6.37096 5.01729L4.87633 2.85415C4.86638 2.83964 4.85305 2.82778 4.83749 2.81959C4.82192 2.81139 4.8046 2.80711 4.78701 2.80711C4.76943 2.80711 4.7521 2.81139 4.73654 2.81959C4.72098 2.82778 4.70765 2.83964 4.6977 2.85415L3.20307 5.01729C3.18875 5.03816 3.1676 5.05337 3.14326 5.06031C3.11892 5.06724 3.09293 5.06546 3.06976 5.05528L0.948945 4.11317C0.930009 4.10486 0.909098 4.1021 0.888653 4.10522C0.868208 4.10835 0.849074 4.11723 0.833487 4.13082C0.8179 4.14442 0.806504 4.16217 0.80063 4.182C0.794756 4.20183 0.794646 4.22292 0.800314 4.24281L2.03002 8.45379C2.03658 8.47638 2.0503 8.49622 2.06911 8.51034C2.08792 8.52446 2.1108 8.5321 2.13432 8.5321H7.44004C7.46356 8.5321 7.48644 8.52446 7.50525 8.51034C7.52406 8.49622 7.53778 8.47638 7.54435 8.45379L8.77405 4.24281C8.77972 4.22292 8.77961 4.20183 8.77373 4.182C8.76786 4.16217 8.75646 4.14442 8.74088 4.13082C8.72529 4.11723 8.70616 4.10835 8.68571 4.10522C8.66527 4.1021 8.64435 4.10486 8.62542 4.11317L6.5046 5.05528C6.48136 5.06536 6.45536 5.06708 6.431 5.06015C6.40664 5.05323 6.38542 5.03808 6.37096 5.01729Z"
                          fill="#575757"
                        />
                      </svg>
                      <span className="pt-1">{l?.total_points}</span>
                    </h4>
                  </div>
                  <Link
                    href={`/users/${l?.id}`}
                    className="absolute inset-0"
                  ></Link>
                </div>
              );
            })}
          </div>
        )}

        {data.leaderboard.length > 3 ? (
          <div className="divide-y-0 dark:divide-ash/10 divide-gray-200">
            {data.leaderboard.length > 3
              ? data.leaderboard?.map((l: LeaderboardEntry) => (
                  <div
                    key={l?.id}
                    className="flex items-center justify-between p-2 gap-2 transition-colors duration-200"
                  >
                    <div className="flex items-center gap-3">
                      <button
                        className="w-9 h-9 cursor-pointer"
                        onClick={() => Router.push(`/users/${l?.id}`)}
                      >
                        <ValidImage
                          className="rounded-full w-9 h-9"
                          src={l?.image}
                          alt={l?.name}
                          width={50}
                          height={50}
                        />
                      </button>
                      <div className="flex flex-col justify-start flex-1 min-w-0 line-clamp-2">
                        <h3
                          className="text-sm text-gray-600 dark:text-gray-400 text-start font-medium truncate cursor-pointer hover:text-hot"
                          onClick={() => Router.push(`/users/${l?.id}`)}
                        >
                          {l?.name}
                        </h3>
                        <TooltipProvider>
                          <Tooltip>
                            <TooltipTrigger>
                              <p className="text-xs text-start dark:text-gray-400 text-gray-500 truncate max-w-36">
                                {l?.institute_name}
                              </p>
                            </TooltipTrigger>
                            <TooltipContent className="bg-hot text-white">
                              {l?.institute_name}
                            </TooltipContent>
                          </Tooltip>
                        </TooltipProvider>
                      </div>
                    </div>
                    <span className="!rounded-full px-3 pt-0.5 text-xs font-medium bg-hot/20 text-hot">
                      {l?.total_points}
                    </span>
                  </div>
                ))
              : loading && (
                  <div className="text-center py-4 text-gray-500">
                    Loading...
                  </div>
                )}
          </div>
        ) : (
          loading && (
            <div className="space-y-2">
              {[...Array(4)].map((_, i) => (
                <div key={i} className="flex items-center space-x-2">
                  <Skeleton className="w-8 h-8 rounded-full bg-ash" />
                  <div className="flex-1">
                    <Skeleton className="w-20 h-3 mb-1 bg-ash" />
                    <Skeleton className="w-24 h-2 bg-ash" />
                  </div>
                  <Skeleton className="w-8 h-4" />
                </div>
              ))}
            </div>
          )
        )}

        {!loading &&
          data.leaderboard.length === 0 &&
          (data.first_3.length === 0 ? (
            <div className="py-2 text-sm text-center text-gray-500">
              No data found
            </div>
          ) : (
            <div className="py-2 text-sm text-center text-gray-500">
              No more data found
            </div>
          ))}

        <div className="mt-2 text-sm text-[#008643] hover:text-hot transition-colors duration-200 text-center">
          {data.leaderboard.length > 3 && (
            <Link href="/leaderboard" passHref>
              আরও দেখুন
            </Link>
          )}
        </div>
      </div>
    </>
  );
};
